import { serviceCaller } from "./serviceCaller.js";
import { DataStructureStream } from "../utils/dataStructureStream.js";
import { ApiVersion, } from "../types/data-structures/smeupDataStructure.js";
/**
 * Execute FUN. If FUN can't be handled internally, it is delegated to another micro-executor.
 * @param fun
 * @param context
 * @param version
 * @returns
 */
export async function executeFun(fun, context, version = ApiVersion.V1) {
    return new Promise(async (resolve, reject) => {
        const out = new DataStructureStream();
        serviceCaller(fun, context, out, version)
            .then(() => {
            const ds = out.getDataStructure();
            resolve(ds);
        })
            .catch((err) => {
            reject(err);
        });
    });
}
//# sourceMappingURL=executeFun.js.map